var FormBuilder=FormBuilder||{};(FormBuilder=FormBuilder||{}).Admin=FormBuilder.Admin||{},FormBuilder.Admin.Conditional=function(e){function t(){e(document).ready(function(){"mod-form"==pagenow&&(this.populateSelectFields(),this.handleEvents())}.bind(this))}return t.prototype.populateSelectFields=function(){e('[data-name="conditonal_field"] select').each(function(t,o){var a="",n=e(":selected",o);if(n.val())a=n.val();else{var i=e(o).attr("name");e.ajax({url:ajaxurl,type:"post",data:{action:"get_selected_field",moduleId:modularity_current_post_id,fieldName:i},success:function(t){"error"!=t&&e('option[value="'+t+'"]',o).prop("selected",!0)}})}e("optgroup, option",o).remove();var l=this.getOptions();void 0!==l&&l.length>0?e.each(l,function(t,n){var i="";e.each(n.selectvalues,function(e,t){var o=this.conditionalString(n.groupLabel),a=t.toLowerCase().replace(/[^A-Z0-9]+/gi,"_");i+='<option value="'+(o+"[#]"+a)+'">'+t+"</option>"}.bind(this));var l='<optgroup label="'+n.groupLabel+'">'+i+"</optgroup>";e(o).append(l),a&&e('option[value="'+a+'"]',o).prop("selected",!0)}.bind(this)):e("<p>Radio selectors is missing.</p>").insertBefore(o)}.bind(this))},t.prototype.getOptions=function(t){var o=[];return e('[data-layout="radio"]:not(.acf-clone)').each(function(t,a){var n={groupLabel:e(a).find('[data-name="label"] input').val(),selectvalues:[]};e('[data-key="field_58eb670d39fef"] table tbody',a).children("tr.acf-row:not(.acf-clone)").each(function(t,o){var a=e(o).find('[data-name="value"] input').val();n.selectvalues.push(a)}),o.push(n)}),o},t.prototype.conditionalString=function(e){return e=e.toLowerCase(),e=e.replace(/[^A-Z0-9]+/gi,"_"),e=e.replace(/_+$/,"")},t.prototype.handleEvents=function(){e(document).on("click",'[data-name="conditional_logic"] [type="checkbox"], [data-layout="radio"] .acf-row-handle > a',function(){this.populateSelectFields()}.bind(this))},new t}(jQuery);